# AlphaSignal Environment Variables
# Copy this file to .env and fill in your actual values
# NEVER commit .env to Git!

# ============================================
# 1. LLM API Keys (Required)
# ============================================

# Google Gemini API Key
# Get it from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-1.5-flash

# DeepSeek API Key (Optional, fallback LLM)
# Get it from: https://platform.deepseek.com/api_keys
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_MODEL=deepseek-reasoner

# OpenAI (Optional)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o

# LLM provider: gemini / deepseek / openai
AI_PROVIDER=gemini

# ============================================
# 2. Passkeys (WebAuthn) Configuration
# Required for biometric login (Fingerprint/FaceID)
# ============================================

# Relying Party ID: Your domain name without protocol (e.g., alphasignal.ai or localhost)
RP_ID=localhost
RP_NAME=AlphaSignal

# Origin: Your full frontend URL (e.g., https://alphasignal.ai)
# Note: Passkeys REQUIRE HTTPS in production
ORIGIN=http://localhost:3000

# ============================================
# 3. Database Configuration
# ============================================

# DB_TYPE: 'sqlite' (default/dev) or 'postgres' (recommended for production)
DB_TYPE=sqlite

# SQLite settings (used if DB_TYPE=sqlite)
DB_PATH=alphasignal.db

# Postgres settings (used if DB_TYPE=postgres)
# In Docker Compose, POSTGRES_HOST should match the service name 'db'
POSTGRES_USER=alphasignal
POSTGRES_PASSWORD=your_secure_password
POSTGRES_DB=alphasignal_core
POSTGRES_HOST=db
POSTGRES_PORT=5432

# ============================================
# 4. Redis Configuration (for Task Queue & Caching)
# ============================================
# In Docker Compose, use: redis://redis:6379/0
REDIS_URL=redis://localhost:6379/0

# ============================================
# 5. Notification Channels (Optional)
# ============================================

# Email Configuration (SMTP)
SMTP_SERVER=your_smtp_host
# MUST be an integer. Use 587 for TLS, 465 for SSL
SMTP_PORT=587
EMAIL_SENDER=your_email@example.com
EMAIL_PASSWORD=your_email_app_password
EMAIL_RECEIVER=recipient@example.com

# Email Provider Choice: 'resend' (recommended) or 'smtp'
EMAIL_PROVIDER=smtp
RESEND_API_KEY=re_123456789abc

# Bark Notification (iOS)
BARK_URL=https://api.day.app/your_device_key

# ============================================
# 6. Application & Network Settings
# ============================================

# Polling interval in minutes (used by run.py)
CHECK_INTERVAL_MINUTES=2

# Frontend Base URL (used for email links)
FRONTEND_BASE_URL=http://localhost:3000

# API URLs (Internal for SSR, Public for Browser)
NEXT_PUBLIC_API_URL=http://localhost:8001/api
API_INTERNAL_URL=http://api:8001

# ============================================
# 7. Security & Authentication
# ============================================

# NextAuth.js (v5)
# Generate a secret: openssl rand -base64 32
AUTH_SECRET=your_nextauth_secret_key
AUTH_URL=http://localhost:3000

# Backend API Protection (generate a random string)
# Generate with: openssl rand -hex 32
API_KEY=

# JWT secret used by backend auth service
# Generate with: openssl rand -hex 32
SECRET_KEY=your_backend_jwt_secret

# Allowed origins for CORS (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# ============================================
# 8. Observability & Logging
# ============================================

# Sentry DSN for error tracking
NEXT_PUBLIC_SENTRY_DSN=your_sentry_dsn_here
SENTRY_AUTH_TOKEN=your_sentry_auth_token_here

# Log format: 'text' or 'json'
LOG_FORMAT=text

# Optional tuning
NEWS_SIMILARITY_THRESHOLD=0.7
NEWS_DEDUPE_WINDOW_HOURS=24
